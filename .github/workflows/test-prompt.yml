name: Test Prompt
on:
  workflow_dispatch:
jobs:
  ai-inference:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Read README content
        id: readme
        run: |
      - name: Set GITHUB_OUTPUT
        run: |
          if [ ! -f junit-results.xml ]; then
            echo "README_CONTENT=No se encontró el archivo junit-results.xml" >> $GITHUB_OUTPUT
          fi
      - name: Run AI Inference Action
        id: inference
        uses: actions/ai-inference@v1
        with:
          max-tokens: 4000
          system-prompt: |
            Eres un experto en desarrollo de software y estás ayudando a un nuevo desarrollador a comprender un proyecto. Utiliza el contenido del junit-results.xml para proporcionar un resumen claro y conciso.
          prompt: |
            Por favor, analiza el siguiente contenido del archivo junit-results.xml y proporciona un resumen conciso que incluya:

            1. **Propósito del proyecto**: ¿Qué hace este proyecto?
            1. **Resumen de las pruebas**: ¿Qué pruebas se están ejecutando?
            2. **Tecnologías principales**: ¿Qué tecnologías, frameworks o herramientas utiliza?
            3. **Estructura del proyecto**: Organización general del código
            4. **Instalación**: Pasos básicos para configurar el proyecto
            5. **Uso**: Cómo ejecutar o utilizar el proyecto
            6. **Características destacadas**: Funcionalidades principales o aspectos importantes

            Mantén el resumen en español y hazlo claro y fácil de entender para desarrolladores que se unan al proyecto. Utiliza emojis divertidos y un lenguaje humoristico
            
            --- CONTENIDO DEL junit-results.xml ---
            ${{ steps.readme.outputs.README_CONTENT }}
            --- FIN DEL CONTENIDO ---
      - name: Write summary with AI response
        run: |
          echo "## Resumen AI del contenido de junit-results.xml:" >> $GITHUB_STEP_SUMMARY
          echo "${{ steps.inference.outputs.response }}" >> $GITHUB_STEP_SUMMARY
